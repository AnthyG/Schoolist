{NAVBAR{{NAVBARLEFT_LINK{/}/NAVBARLEFT_LINK}{NAVBARLEFT_ICON{chevron_left}/NAVBARLEFT_ICON}{NAVBAR_LINKS{}/NAVBAR_LINKS}}/NAVBAR}<div class="container grid-960"><div class="container shadow mb-10"><h2 style="padding-top:.5rem"><select class="form-select select-lg" id="list_selector">{LIST_OPTIONS}</select></h2><form class="form-horizontal"><div class="form-group"><input class="form-input" type="search" name="search" placeholder="Search"></div><div class="form-group"><div class="col-6"><div id="AC_countries" class="form-autocomplete"><!-- autocomplete input container --><div class="form-autocomplete-input"><!-- autocomplete chips --><!-- autocomplete real input box --> <input class="form-input" type="text" placeholder="Country"> <input id="I_countries" type="hidden" name="countries"></div><!-- autocomplete suggestion list --><ul class="menu"><!-- menu list chips --><li class="menu-item" value="USA"><a href="#"><div class="tile tile-centered"><div class="tile-icon"><span class="avatar flag-icon-background flag-icon-us"></span></div><div class="tile-content">United States of America</div></div></a></li><li class="menu-item" value="Spain"><a href="#"><div class="tile tile-centered"><div class="tile-icon"><span class="avatar flag-icon-background flag-icon-es"></span></div><div class="tile-content">Spain</div></div></a></li><li class="menu-item" value="France"><a href="#"><div class="tile tile-centered"><div class="tile-icon"><span class="avatar flag-icon-background flag-icon-fr"></span></div><div class="tile-content">France</div></div></a></li></ul></div></div><div class="col-1"></div><div class="col-6"><div class="form-autocomplete"><!-- autocomplete input container --><div class="form-autocomplete-input"><!-- autocomplete chips --><!-- autocomplete real input box --> <input class="form-input" type="text" placeholder="Language"></div><!-- autocomplete suggestion list --><ul class="menu"><!-- menu list chips --><li class="menu-item" value="English"><a href="#"><div class="tile tile-centered"><div class="tile-icon"><span class="avatar flag-icon-background flag-icon-gb"></span></div><div class="tile-content">English</div></div></a></li><li class="menu-item" value="Spanish"><a href="#"><div class="tile tile-centered"><div class="tile-icon"><span class="avatar flag-icon-background flag-icon-es"></span></div><div class="tile-content">Spanish</div></div></a></li><li class="menu-item" value="French"><a href="#"><div class="tile tile-centered"><div class="tile-icon"><span class="avatar flag-icon-background flag-icon-fr"></span></div><div class="tile-content">French</div></div></a></li></ul></div></div></div><input class="btn btn-primary" type="submit" value="Go!"></form></div><div id="listitemview_HTML" style="display:none">{LISTITEMVIEW_HTML}</div><div class="card-list" id="Listitemlist"><!--{LISTITEMLIST}--></div></div><script>function getDocHeight(){var e=document;return Math.max(e.body.scrollHeight,e.documentElement.scrollHeight,e.body.offsetHeight,e.documentElement.offsetHeight,e.body.clientHeight,e.documentElement.clientHeight)}function autocompleteHin(e,t,o,i){i.on("click",function(){var a=i.find(".tile-content").html(),n=i.find(".tile-icon").has(".avatar").html()||"",c=i.attr("value"),l=$('<div class="chip" value="'+c+'">'+n+a+'<button class="btn btn-clear"></button></div>').insertBefore(t);i.remove(),e.trigger("AC_Hin",[c,l,i]),autocompleteSearch(t,l),autocompleteHer(e,o,t,l)})}function autocompleteHer(e,t,o,i){i.find(".btn.btn-clear").on("click",function(){var a=i.text(),n=i.find(".avatar")[0]||"",c=i.attr("value");""!==n&&(n=n.outerHTML,n='<div class="tile-icon">'+n+"</div>");var l=$('<li class="menu-item" value="'+c+'"><a href="#"><div class="tile tile-centered">'+n+'<div class="tile-content">'+a+"</div></div></a></li>").appendTo(t);i.remove(),e.trigger("AC_Her",[c,l,i]),autocompleteSearch(o,l),autocompleteHin(e,o,t,l)})}function autocompleteSearch(e,t){var o=e.val().toLowerCase(),i=t.find(".tile-content").text().toLowerCase();i.search(o)===-1?t.hide():t.show()}function autocompleteBinder(){$(".form-autocomplete").each(function(e,t){(function(e){var t=e.find(".form-autocomplete-input"),o=t.find(".form-input"),i=e.find(".menu");o.on("focusin",function(){e.addClass("active")}),o.on("focusout",function(){e.removeClass("active")}),o.on("keyup",function(){var e=i.find(".menu-item");e.each(function(e,t){autocompleteSearch(o,$(t))})}),i.find(".menu-item").each(function(t,a){autocompleteHin(e,o,i,$(a))}),t.find(".chip").each(function(t,a){autocompleteHer(e,i,o,$(a))})})($(t))})}function populateListItemView(e){var t=$("#listitemview_HTML").html(),o="";e.languages.forEach(function(e){o+='<a class="" href="?language='+e+'">'+e+"</a> "});var i="<ul>";e.what.forEach(function(e){i+='<li><a class="" href="?what='+e+'">'+e+"</a></li>"}),i+="</ul>",t=t.replace(/\{ITEM_TITLE\}/gm,e.title).replace(/\{ITEM_ZIP\}/gm,e.zip).replace(/\{ITEM_PLACE\}/gm,e.place).replace(/\{ITEM_COUNTRY\}/gm,e.country).replace(/\{ITEM_TYPE\}/gm,e.type).replace(/\{ITEM_WEBSITE\}/gm,e.website).replace(/\{ITEM_PHONE\}/gm,e.phone).replace(/\{ITEM_MOBILE\}/gm,e.mobile).replace(/\{ITEM_EMAIL\}/gm,e.email).replace(/\{ITEM_WHO\}/gm,e.who).replace(/\{ITEM_WHAT\}/gm,i).replace(/\{ITEM_LANGUAGES\}/gm,o);var a=$(t).appendTo("#Listitemlist");return cardCollapsBinder(a),a}function cardCollapsBinder(e){var e=e||".collapse-card";e=$(e),e.find(".card-header>*>.card-collapser").on("click",function(e){$(this).parent("*").parent(".card-header").parent(".collapse-card").find("."+$(this).attr("collaps")).animate({opacity:"toggle",height:"toggle"},150,"swing");var t="expand_less",o="expand_more";$(this).children(".collaps-icon").html()===t?$(this).children(".collaps-icon").html(o):$(this).children(".collaps-icon").html(t)})}function getMoreListItems(e){var e="number"==typeof e?e:Object.keys(LISTITEMLIST).length;$.get("/l/AiA/get/"+e,function(t,o){if(console.log(o,t),"success"===o&&"No more items!"!==t){var i=0;for(var a in t){var n=t[a];n&&(populateListItemView(n),LISTITEMLIST[a]=n,i++)}i>0?(store.set("LISTITEMLIST",LISTITEMLIST),0!==e&&CopyToast("Loaded "+i+" more items!","toast-success")):CopyToast("There are no new items!")}else CopyToast("Failed receiving more items :/ (Statuscode: "+o+")","toast-danger")})}var sv=store.get("LISTITEMLIST"),LISTITEMLIST=sv?sv:{};$(document).ready(function(){$("#list_selector").on("change",function(){window.location.replace("/l/"+$(this).val())}),$("#list_selector").val("{CURRENT_LIST}"),autocompleteBinder(),Object.keys(LISTITEMLIST).length<1&&getMoreListItems();for(var e in LISTITEMLIST){var t=LISTITEMLIST[e];populateListItemView(t)}$("#AC_countries").on("AC_Hin",function(e,t,o,i){var a=$("#I_countries").val().split(",");a.push(t),console.log(a);var n=!1;$("#Listitemlist").find(".collapse-card [sCountries]").parents(".collapse-card").hide();for(var c in a){var l=a[c];l&&(n=!!$("#Listitemlist").find('.collapse-card [sCountries="'+l+'"]').parents(".collapse-card").show()[0]||n)}n||CopyToast("No items fit to the applied filters!","toast-danger"),$("#I_countries").val(a.join(","))}),$("#AC_countries").on("AC_Her",function(e,t,o,i){var a=$("#I_countries").val().split(",");a.splice(a.indexOf(t),1),console.log(a);var n=!1;$("#Listitemlist").find(".collapse-card [sCountries]").parents(".collapse-card").hide();for(var c in a){var l=a[c];l&&(n=!!$("#Listitemlist").find('.collapse-card [sCountries="'+l+'"]').parents(".collapse-card").show()[0]||n)}n||CopyToast("No items fit to the applied filters!","toast-danger"),$("#I_countries").val(a.join(","))}),$(window).scroll(function(){$(window).scrollTop()+$(window).height()>=getDocHeight()&&getMoreListItems()})})</script>